<!DOCTYPE html>
<head>
  <style> body { margin: 0; } </style>

  <script src="//cdn.jsdelivr.net/npm/force-graph"></script>
  <script src="//cdn.jsdelivr.net/npm/3d-force-graph"></script>
  <!--<script src="../../dist/force-graph.js"></script>-->
  <!-- https://vasturiano.github.io/force-graph/example/load-json/ -->

<!-- Google tag (gtag.js) -->
<script>
    function cgtag(Args){
      const launchers = ["colab","localfile","jupyter","vscode"];
      const urlParams = {
        v: '2',
        tid: 'G-SN1X879JX5',
        gtm: '45je4510v868754765za200',
        cid: '83823701.1706735226',
        _p :  '1715110000025',
        _s : '1',
        sid: '17151100025',
        sct: '3',                
        seg: "7",  
        en: 'page_view',
        ///
        dp: window.location.href,
        dl: document.title ,
        dt: 'cloud',
        ul: 'en-us',
        'ep.chart': Args,
      };
      
          const params = new URLSearchParams(urlParams).toString();
          fetch("https://www.google-analytics.com/g/collect?"+params, {
            method: 'POST',
            mode: 'no-cors',
            headers: {
              "Content-Type": "application/x-www-form-urlencoded",
              "accept": "*/*",
              "accept-language": "en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7",
              "priority": "u=4, i",
              "sec-ch-ua": "\"Chromium\";v=\"124\", \"Google Chrome\";v=\"124\", \"Not-A.Brand\";v=\"99\"",
              "sec-ch-ua-mobile": "?0",
              "sec-ch-ua-platform": "\"Windows\"",
              "sec-fetch-dest": "empty",
              "sec-fetch-mode": "no-cors",
              "sec-fetch-site": "cross-site"
            },
    
          });
    
    }
    </script>
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-2F8H0XZ7WF"></script>
    <script>
    
      if (location.protocol === "file:") {
        cgtag("modx")
      } else {
    
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-2F8H0XZ7WF',
            {page_path: location.pathname + location.search + location.hash});
      }
    
    </script>
</head>

<body>
<div style="display: flex; width: 100vw; height: 100vh;">
    <div id="3d-graph" style="position: relative; width: 50%; height: 100%;"></div>
    <div id="graph" style="position: relative; width: 50%; height: 100%;"></div>
</div>

  <script>

    fetch('./tdmmacro.json').then(res => res.json()).then(data => {
      const Graph = new ForceGraph(document.getElementById('graph'))
        .width(800)
        .graphData(data)
        .nodeId('name')
        .nodeVal('val')
        .nodeLabel('name')
        .nodeColor(node => node.itemStyle?.color)
        // .nodeAutoColorBy('depth')
        .linkSource('source')
        .linkTarget('target')

    const DGraph = new ForceGraph3D(document.getElementById('3d-graph'))
        .width(800)
        .graphData(data)
        .nodeId('name')
        .nodeVal('val')
        .nodeLabel('name')
        .nodeColor(node => node.itemStyle?.color)
        // .nodeAutoColorBy('depth')
        .linkSource('source')
        .linkTarget('target');
    });
  </script>
</body>
</html>
